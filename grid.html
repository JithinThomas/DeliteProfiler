<html>
	<head>
	  <title>Delite Performance Profiler</title>
	  <link rel="stylesheet" type="text/css" href="jquery.gridster.css">
	  <link rel="stylesheet" type="text/css" href="demo.css">
	  <link rel="stylesheet" type="text/css" media="screen" href="editor.css">
	  <link rel="stylesheet" type="text/css" href="style.css">
	  <link rel="stylesheet" type="text/css" href="dataflow.css">
	  <link rel="stylesheet" type="text/css" href="github.css">
	  <link rel="stylesheet" type="text/css" href="timeline.css">
	  <script>
	  </script>
	</head>

	<body>
	  <div class="gridster ready">
	    <ul style="width: 100%; height: 100%">
	      <li data-row="1" data-col="1" data-sizex="2" data-sizey="1" class="gs-w">
	      	<input type="file" id="files" name="files[]" />
	      </li>
	      <li data-row="2" data-col="1" data-sizex="1" data-sizey="10" class="gs-w">
	      	<div id="editor" style="width: inherit; height: inherit;"></div>
	      </li>
	      <li data-row="2" data-col="2" data-sizex="1" data-sizey="10" class="gs-w">
	      	<div class="dataflow" style="width: inherit; height: inherit;"></div>
	      </li>
	      <li data-row="3" data-col="1" data-sizex="2" data-sizey="4" class="gs-w">
	      	<!--div class="timeline" style="width: inherit; height: inherit;"></div-->
	      	<div class="timeline" style="height: inherit;"></div>
	      </li>
	    </ul>
	  </div>
	  	<script type="text/javascript" src="http://mbostock.github.com/d3/d3.v2.js"></script>
        <script type="text/javascript" src="../jquery/dist/jquery.min.js"></script>
		<script type="text/javascript" src="../context-menu-js/jquery.contextMenu.js"></script>
		<script type="text/javascript" src="timeline.js"></script>

	    <script type="text/javascript" src="../jquery/dist/jquery.js"></script>
	    <script type="text/javascript" src="../gridster/dist/jquery.gridster.js" charset="utf-8"></script>
	    <script type="text/javascript" src="../ace-editor/ace-builds/src-noconflict/ace.js" charset="utf-8"></script>
	    <script type="text/javascript" src="editor.js" charset="utf-8"></script>
	    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	    <script type="text/javascript" src="../cola/highlight.pack.js"></script>
        <script type="text/javascript" src="../cola/cola.v1.min.js"></script>
        <script type="text/javascript" src="../graphlib-dot/graphlib-dot.min.js"></script>
        <script type="text/javascript" src="../graphlib-dot/graphlib-dot.js"></script>
        <!--script type="text/javascript" src="../../sample.deg"></script-->
        <script type="text/javascript" src="../../HelloSimpleCompiler.deg">
        </script>
        <script type="text/javascript" src="dataflow.js"></script>
        <script type="text/javascript" src="sample_app.txt"></script>
        <script type="text/javascript" src="read-input-files.js"></script>

        <script type="text/javascript" src="../profileDataTest/profileData.js"></script>

	    <script type="text/javascript">
	    	var currentlyHighlightedCfgNodeId = ""
	    	function kernelClickHandler(lines) {
	    		highlightLines(editor, lines)
	    	}

	    	function highlightNodeOnCfg(kernelId) {
	    		if (currentlyHighlightedCfgNodeId != "") {
	    			c.unhighlightNode(currentlyHighlightedCfgNodeId)
	    		}

	    		currentlyHighlightedCfgNodeId = kernelId
	    		c.highlightNode(kernelId)
	    	}

	    	var widget_margin_w = 5
	    	var widget_margin_h = 5
	    	var base_widget_width = (window.innerWidth - (4 * widget_margin_w)) / 2 // Dividing by 2 since the max value of data-sizex == 2
	    	var base_widget_height = window.innerHeight / 20
			var gridster = $(".gridster ul").gridster({
          		//widget_base_dimensions: [550, 55],
          		widget_base_dimensions: [base_widget_width, base_widget_height],
          		widget_margins: [widget_margin_w, widget_margin_h],
          		helper: 'clone',
	          	resize: {
	            	enabled: true
	          	},
        	}).data('gridster');

      		var editor = createEditor("editor");
      		var c = createDataFlowGraph(cola, ".dataflow", kernelClickHandler);
      		
	      	gridster.disable() // to enable the dragging of the dataflow graph when one of the nodes is clicked and dragged.
	      	addAppSourceFileHandler("files", editor)
	    </script>
	    <script type="text/javascript">
	    	var p = profileData()
	    	var dataForTimelineView = []
            for (i in p.kernels) {
                var o = {}
                o["lane"] = p.location[i]
                o["id"] = p.kernels[i]
                o["start"] = p.start[i]
                o["end"] = o["start"] + p.duration[i]
                dataForTimelineView.push(o)
            }
	    	//createTimeline(".timeline", highlightNodeOnCfg);
	    	createTimeline(".timeline", highlightNodeOnCfg, dataForTimelineView);
	    </script>
	</body>
</html>